import{a as F,f as L,c as Et,d as Ua}from"../chunks/c0rXTrr9.js";import"../chunks/BVQWgzXh.js";import{o as zs}from"../chunks/CMfPz1dr.js";import{R as Jn,Y as Ws,U as it,a2 as Hn,aq as Vs,Z as Ys,g as e,$ as Gs,a0 as Qs,a1 as Ea,a3 as zn,V as vn,a9 as Xs,ay as Zs,ai as ja,M as fn,aS as ft,T as Gn,X as Ks,H as tt,aT as Da,aw as Xn,aU as er,aV as tr,m as $,a8 as qa,aW as nr,N as Ba,Q as La,aX as Wn,aY as ar,av as sr,O as rr,as as ir,aZ as Ja,q as or,a_ as lr,aF as cr,aO as dr,l as ur,a$ as vr,b0 as pr,aH as fr,t as G,c as r,s as l,r as s,p as mr,b1 as Oe,b2 as _r,a as br,f as u,b as c,b3 as Vn,a4 as ht,b4 as Je,j as yt,aR as xr,b5 as gr}from"../chunks/yo6EL1wl.js";import{s as C}from"../chunks/LBoZHYo6.js";import{i as K}from"../chunks/B0Lk4f_2.js";import{s as je,i as rt,a as hr,g as yr,r as Ce,b as Pe,f as Ae}from"../chunks/fWTGNQna.js";import{e as E}from"../chunks/BETbJ1jZ.js";import{i as wr}from"../chunks/B5x7G-5O.js";import{p as Lt}from"../chunks/CdcQO1R9.js";function Ye(v,k){return k}function kr(v,k,B){for(var q=[],P=k.length,f,_=k.length,X=0;X<P;X++){let Se=k[X];La(Se,()=>{if(f){if(f.pending.delete(Se),f.done.add(Se),f.pending.size===0){var te=v.outrogroups;Qn(Xn(f.done)),te.delete(f),te.size===0&&(v.outrogroups=null)}}else _-=1},!1)}if(_===0){var A=q.length===0&&B!==null;if(A){var le=B,J=le.parentNode;sr(J),J.append(le),v.items.clear()}Qn(k,!A)}else f={pending:new Set(k),done:new Set},(v.outrogroups??(v.outrogroups=new Set)).add(f)}function Qn(v,k=!0){for(var B=0;B<v.length;B++)rr(v[B],k)}var Oa;function Ge(v,k,B,q,P,f=null){var _=v,X=new Map,A=(k&Ja)!==0;if(A){var le=v;_=it?Hn(Vs(le)):le.appendChild(Jn())}it&&Ys();var J=null,Se=tt(()=>{var Y=B();return Da(Y)?Y:Y==null?[]:Xn(Y)}),te,me=!0;function $e(){S.fallback=J,Cr(S,te,_,k,q),J!==null&&(te.length===0?(J.f&ft)===0?Ba(J):(J.f^=ft,Zt(J,null,_)):La(J,()=>{J=null}))}var Re=Ws(()=>{te=e(Se);var Y=te.length;let xe=!1;if(it){var I=Gs(_)===Qs;I!==(Y===0)&&(_=Ea(),Hn(_),zn(!1),xe=!0)}for(var he=new Set,ve=fn,Ue=Ks(),we=0;we<Y;we+=1){it&&vn.nodeType===Xs&&vn.data===Zs&&(_=vn,xe=!0,zn(!1));var Xe=te[we],Qe=q(Xe,we),_e=me?null:X.get(Qe);_e?(_e.v&&ja(_e.v,Xe),_e.i&&ja(_e.i,we),Ue&&ve.skipped_effects.delete(_e.e)):(_e=Pr(X,me?_:Oa??(Oa=Jn()),Xe,Qe,we,P,k,B),me||(_e.e.f|=ft),X.set(Qe,_e)),he.add(Qe)}if(Y===0&&f&&!J&&(me?J=Gn(()=>f(_)):(J=Gn(()=>f(Oa??(Oa=Jn()))),J.f|=ft)),it&&Y>0&&Hn(Ea()),!me)if(Ue){for(const[He,U]of X)he.has(He)||ve.skipped_effects.add(U.e);ve.oncommit($e),ve.ondiscard(()=>{})}else $e();xe&&zn(!0),e(Se)}),S={effect:Re,items:X,outrogroups:null,fallback:J};me=!1,it&&(_=vn)}function Qt(v){for(;v!==null&&(v.f&ar)===0;)v=v.next;return v}function Cr(v,k,B,q,P){var _e,He,U,Ct,ot,nt,jt,O,Pt;var f=(q&lr)!==0,_=k.length,X=v.items,A=Qt(v.effect.first),le,J=null,Se,te=[],me=[],$e,Re,S,Y;if(f)for(Y=0;Y<_;Y+=1)$e=k[Y],Re=P($e,Y),S=X.get(Re).e,(S.f&ft)===0&&((He=(_e=S.nodes)==null?void 0:_e.a)==null||He.measure(),(Se??(Se=new Set)).add(S));for(Y=0;Y<_;Y+=1){if($e=k[Y],Re=P($e,Y),S=X.get(Re).e,v.outrogroups!==null)for(const De of v.outrogroups)De.pending.delete(S),De.done.delete(S);if((S.f&ft)!==0)if(S.f^=ft,S===A)Zt(S,null,B);else{var xe=J?J.next:A;S===v.effect.last&&(v.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),wt(v,J,S),wt(v,S,xe),Zt(S,xe,B),J=S,te=[],me=[],A=Qt(J.next);continue}if((S.f&Wn)!==0&&(Ba(S),f&&((Ct=(U=S.nodes)==null?void 0:U.a)==null||Ct.unfix(),(Se??(Se=new Set)).delete(S))),S!==A){if(le!==void 0&&le.has(S)){if(te.length<me.length){var I=me[0],he;J=I.prev;var ve=te[0],Ue=te[te.length-1];for(he=0;he<te.length;he+=1)Zt(te[he],I,B);for(he=0;he<me.length;he+=1)le.delete(me[he]);wt(v,ve.prev,Ue.next),wt(v,J,ve),wt(v,Ue,I),A=I,J=Ue,Y-=1,te=[],me=[]}else le.delete(S),Zt(S,A,B),wt(v,S.prev,S.next),wt(v,S,J===null?v.effect.first:J.next),wt(v,J,S),J=S;continue}for(te=[],me=[];A!==null&&A!==S;)(le??(le=new Set)).add(A),me.push(A),A=Qt(A.next);if(A===null)continue}(S.f&ft)===0&&te.push(S),J=S,A=Qt(S.next)}if(v.outrogroups!==null){for(const De of v.outrogroups)De.pending.size===0&&(Qn(Xn(De.done)),(ot=v.outrogroups)==null||ot.delete(De));v.outrogroups.size===0&&(v.outrogroups=null)}if(A!==null||le!==void 0){var we=[];if(le!==void 0)for(S of le)(S.f&Wn)===0&&we.push(S);for(;A!==null;)(A.f&Wn)===0&&A!==v.fallback&&we.push(A),A=Qt(A.next);var Xe=we.length;if(Xe>0){var Qe=(q&Ja)!==0&&_===0?B:null;if(f){for(Y=0;Y<Xe;Y+=1)(jt=(nt=we[Y].nodes)==null?void 0:nt.a)==null||jt.measure();for(Y=0;Y<Xe;Y+=1)(Pt=(O=we[Y].nodes)==null?void 0:O.a)==null||Pt.fix()}kr(v,we,Qe)}}f&&or(()=>{var De,lt;if(Se!==void 0)for(S of Se)(lt=(De=S.nodes)==null?void 0:De.a)==null||lt.apply()})}function Pr(v,k,B,q,P,f,_,X){var A=(_&er)!==0?(_&tr)===0?$(B,!1,!1):qa(B):null,le=(_&nr)!==0?qa(P):null;return{v:A,i:le,e:Gn(()=>(f(k,A??B,le??P,X),()=>{v.delete(q)}))}}function Zt(v,k,B){if(v.nodes)for(var q=v.nodes.start,P=v.nodes.end,f=k&&(k.f&ft)===0?k.nodes.start:B;q!==null;){var _=ir(q);if(f.before(q),q===P)return;q=_}}function wt(v,k,B){k===null?v.effect.first=B:k.next=B,B===null?v.effect.last=k:B.prev=k}function Sr(v,k,B){var q=v==null?"":""+v;return q===""?null:q}function Nr(v,k){return v==null?null:String(v)}function Aa(v,k,B,q,P,f){var _=v.__className;if(it||_!==B||_===void 0){var X=Sr(B);(!it||X!==v.getAttribute("class"))&&(X==null?v.removeAttribute("class"):v.className=X),v.__className=B}return f}function Ra(v,k,B,q){var P=v.__style;if(it||P!==k){var f=Nr(k);(!it||f!==v.getAttribute("style"))&&(f==null?v.removeAttribute("style"):v.style.cssText=f),v.__style=k}return q}function Ha(v,k,B=!1){if(v.multiple){if(k==null)return;if(!Da(k))return vr();for(var q of v.options)q.selected=k.includes(Kt(q));return}for(q of v.options){var P=Kt(q);if(pr(P,k)){q.selected=!0;return}}(!B||k!==void 0)&&(v.selectedIndex=-1)}function Mr(v){var k=new MutationObserver(()=>{Ha(v,v.__value)});k.observe(v,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ur(()=>{k.disconnect()})}function Yn(v,k,B=k){var q=new WeakSet,P=!0;cr(v,"change",f=>{var _=f?"[selected]":":checked",X;if(v.multiple)X=[].map.call(v.querySelectorAll(_),Kt);else{var A=v.querySelector(_)??v.querySelector("option:not([disabled])");X=A&&Kt(A)}B(X),fn!==null&&q.add(fn)}),dr(()=>{var f=k();if(v===document.activeElement){var _=fr??fn;if(q.has(_))return}if(Ha(v,f,P),P&&f===void 0){var X=v.querySelector(":checked");X!==null&&(f=Kt(X),B(f))}v.__value=f,P=!1}),Mr(v)}function Kt(v){return"__value"in v?v.__value:v.value}function Xt(v){return function(...k){var B=k[0];return B.stopPropagation(),v==null?void 0:v.apply(this,k)}}const $r=({params:v})=>({roomCode:v.roomCode}),ji=Object.freeze(Object.defineProperty({__proto__:null,load:$r},Symbol.toStringTag,{value:"Module"}));var Ir=L('<span class="absolute -bottom-1 -right-1 min-w-[16px] h-[16px] px-[4px] inline-flex items-center justify-center rounded-full bg-primary-400 text-white text-[10px] leading-none font-semibold shadow" aria-hidden="true"> </span>'),Tr=L(`<div class="relative inline-block" role="img"><svg class="rounded-full shadow-sm"><circle></circle><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="white" font-family="'Inter', sans-serif"> </text></svg> <!></div>`);function pn(v,k){let B=Lt(k,"initials",8,"?"),q=Lt(k,"color",8,"#94a3b8"),P=Lt(k,"size",8,40),f=Lt(k,"badge",8,null),_=Lt(k,"title",8);var X=Tr(),A=r(X),le=r(A),J=l(le),Se=r(J,!0);s(J),s(A);var te=l(A,2);{var me=$e=>{var Re=Ir(),S=r(Re,!0);s(Re),G(()=>C(S,f())),F($e,Re)};K(te,$e=>{f()&&$e(me)})}s(X),G(()=>{je(X,"title",_()||B()),je(X,"aria-label",_()||B()),je(A,"width",P()),je(A,"height",P()),je(A,"viewBox",`0 0 ${P()} ${P()}`),je(le,"cx",P()/2),je(le,"cy",P()/2),je(le,"r",P()/2),je(le,"fill",q()),je(J,"font-size",P()*.45),C(Se,B())}),F(v,X)}const Jt=[{code:"USD",symbol:"$",exponent:2,flag:"üá∫üá∏"},{code:"EUR",symbol:"‚Ç¨",exponent:2,flag:"üá™üá∫"},{code:"GBP",symbol:"¬£",exponent:2,flag:"üá¨üáß"},{code:"JPY",symbol:"¬•",exponent:0,flag:"üáØüáµ"},{code:"CAD",symbol:"$",exponent:2,flag:"üá®üá¶"},{code:"AUD",symbol:"$",exponent:2,flag:"üá¶üá∫"},{code:"CHF",symbol:"Fr",exponent:2,flag:"üá®üá≠"},{code:"CNY",symbol:"¬•",exponent:2,flag:"üá®üá≥"},{code:"KRW",symbol:"‚Ç©",exponent:0,flag:"üá∞üá∑"},{code:"MXN",symbol:"$",exponent:2,flag:"üá≤üáΩ"},{code:"SGD",symbol:"$",exponent:2,flag:"üá∏üá¨"},{code:"HKD",symbol:"$",exponent:2,flag:"üá≠üá∞"},{code:"INR",symbol:"‚Çπ",exponent:2,flag:"üáÆüá≥"},{code:"SEK",symbol:"kr",exponent:2,flag:"üá∏üá™"},{code:"NOK",symbol:"kr",exponent:2,flag:"üá≥üá¥"}],Fr=Jt.reduce((v,k)=>(v[k.code]=k.exponent,v),{}),Er=Jt.reduce((v,k)=>(v[k.code]=k.symbol,v),{});Jt.reduce((v,k)=>(v[k.code]=k.flag,v),{});const kt="USD";var jr=L('<div class="absolute top-3 inset-x-0 flex justify-center pointer-events-none z-50 px-4"><div class="flex items-center gap-3 rounded-xl border border-warning-500/60 bg-warning-900/95 text-warning-50 text-xs px-3 py-2 shadow-xl pointer-events-auto"><span>‚ö†Ô∏è</span> <span class="flex-1"> </span> <button class="action-btn action-btn-surface action-btn-compact" type="button">Retry</button></div></div>'),qr=L('<img alt="Join QR code" class="w-16 h-16 rounded-lg border border-white/20 bg-white/5"/>'),Or=L("<option> </option>"),Ar=L('<button class="action-btn action-btn-danger action-btn-compact mt-1 w-full" title="Remove"><svg class="inline-block align-middle" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#ef4444"><path d="M3 6h18"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M10 11v6"></path><path d="M14 11v6"></path></svg></button>'),Rr=L('<div class="flex flex-col items-center text-xs relative w-14 shrink-0"><!> <span class="absolute -right-1 -top-1 w-3 h-3 rounded-full border border-surface-900"></span> <!></div>'),Ur=L('<div class="rounded-xl bg-warning-500/20 text-warning-200 px-4 py-3 text-sm border border-warning-500/40 flex items-center justify-between gap-3"><div class="min-w-0"> </div> <button class="btn btn-outline shrink-0" type="button">Review</button></div>'),Dr=L('<div class="rounded-xl bg-error-500/20 text-error-200 px-4 py-3 text-sm border border-error-500/40"> </div>'),Br=L('<label><svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 7h14a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2Z"></path><path d="M9 7l1.5-2.5h3L15 7"></path><circle cx="12" cy="13" r="3.5"></circle></svg> <span class="ml-1"> </span> <input type="file" class="hidden" accept="image/*"/></label>'),Lr=L('<p class="text-xs text-surface-300"> </p>'),Jr=Ua('<svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#ef4444"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'),Hr=Ua('<svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#22c55e"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>'),zr=L('<div class="glass-card rounded-2xl p-4 flex items-center justify-between w-full text-left"><div class="flex-1 pr-4 min-w-0" role="button" tabindex="0"><p class="font-semibold text-white leading-tight break-words truncate" style="font-size: clamp(13px, 4vw, 16px);"> </p> <p class="text-sm text-surface-200 whitespace-nowrap"> </p> <!> <div class="text-xs text-surface-400 flex flex-wrap items-center gap-2"><span>Assigned:</span> <div class="flex items-center gap-1 flex-wrap"><!></div></div></div> <div class="flex flex-col gap-2 mt-2 items-end flex-shrink-0 w-auto ml-2"><div class="flex gap-2 flex-wrap justify-end"><button class="action-btn action-btn-surface action-btn-compact" title="Assign participants" type="button"><svg class="inline-block align-middle" width="18" height="18" viewBox="0 0 34 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 1 1 0 7.75"></path><g transform="translate(9,-1)" stroke="#22c55e" stroke-width="2.35"><line x1="18" y1="6" x2="18" y2="14"></line><line x1="14" y1="10" x2="22" y2="10"></line></g></svg> <span class="hidden sm:inline ml-1">Assign</span></button> <button type="button"><!> <span class="hidden sm:inline ml-1"> </span></button></div> <div class="flex gap-2 flex-wrap justify-end"><button class="action-btn action-btn-surface action-btn-compact" title="Edit" type="button"><svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#eab308"><path d="M12 20h9"></path><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5Z"></path></svg> <span class="hidden sm:inline ml-1">Edit</span></button> <button class="action-btn action-btn-surface action-btn-compact" title="Copy" type="button"><svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="11" height="11" rx="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> <span class="hidden sm:inline ml-1">Copy</span></button> <button class="action-btn action-btn-danger action-btn-compact" title="Delete" type="button"><svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#ef4444"><path d="M3 6h18"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M10 11v6"></path><path d="M14 11v6"></path></svg> <span class="hidden sm:inline ml-1">Delete</span></button></div></div></div>'),Wr=L('<span class="text-xs px-2 py-1 rounded-full bg-error-500/20 text-error-100 border border-error-400/40 flex items-center gap-1"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#ef4444"><line x1="5" y1="12" x2="19" y2="12"></line></svg> Unassign</span>'),Vr=L('<span class="text-xs px-2 py-1 rounded-full bg-primary-500/20 text-primary-100 border border-primary-400/40 flex items-center gap-1"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#22c55e"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Assign</span>'),Yr=L('<span class="text-sm text-surface-500">Tap to toggle</span>'),Gr=L('<button class="w-full flex items-center justify-between rounded-xl border border-surface-800 px-4 py-3 hover:border-primary-500/60"><div class="flex items-center gap-2"><!> <span> </span></div> <!></button>'),Qr=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold">Assign participants</h3> <div class="space-y-2"></div> <button class="btn btn-outline w-full">Done</button></div></div>'),Xr=L("<option> </option>"),Zr=L('<button class="btn btn-outline" type="button"> </button>'),Kr=L("<li> </li>"),ei=L('<div class="rounded-xl border border-warning-500/40 bg-warning-500/10 text-warning-200 p-3 text-sm space-y-1"><div class="font-semibold">Notes from parser</div> <ul class="list-disc list-inside space-y-1"></ul></div>'),ti=L('<div class="flex items-center justify-between"><span class="text-surface-300">Discounted unit</span> <span class="font-semibold text-white"> </span></div> <div class="flex items-center justify-between"><span class="text-surface-300">Total after discount</span> <span class="font-semibold text-white"> </span></div>',1),ni=L('<div class="rounded-lg bg-surface-800/70 border border-surface-700 px-3 py-2 text-sm flex flex-col gap-1"><!></div>'),ai=L('<div class="border border-surface-800 rounded-xl p-4 space-y-3"><label class="block space-y-1"><span class="text-xs text-surface-300">Item Name</span> <input class="input w-full"/></label> <div class="grid grid-cols-2 gap-3"><label class="block space-y-1"><span class="text-xs text-surface-300">Quantity</span> <input class="input w-full" type="number" min="1" step="1"/></label> <label class="block space-y-1"><span class="text-xs text-surface-300"> </span> <input class="input w-full" type="number" min="0"/></label></div> <div class="grid grid-cols-2 gap-3"><label class="block space-y-1"><span class="text-xs text-surface-300"> </span> <input class="input w-full" type="number" min="0"/></label> <label class="block space-y-1"><span class="text-xs text-surface-300"> </span> <input class="input w-full" type="number" min="0"/></label></div> <div class="grid grid-cols-2 gap-3"><label class="block space-y-1"><span class="text-xs text-surface-300">Discount (%)</span> <input class="input w-full" type="number" min="0" step="0.01"/></label></div> <!> <div class="flex justify-end"><button class="action-btn action-btn-danger action-btn-compact" type="button"><svg class="inline-block align-middle" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#ef4444"><path d="M3 6h18"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M10 11v6"></path><path d="M14 11v6"></path></svg> <span class="ml-1">Remove</span></button></div></div>'),si=L('<div class="mt-3 flex items-start justify-between gap-3"><div><p class="text-sm font-semibold">Projected total tax</p> <p class="text-xs text-surface-300"> </p></div> <div class="text-right text-sm"><div class="font-semibold"> </div> <div class="text-xs text-surface-300"> </div></div></div>'),ri=L('<div class="mt-2 text-xs text-surface-300"> </div>'),ii=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 max-h-[80vh] overflow-y-auto text-white"><h3 class="text-lg font-semibold">Review receipt</h3> <p class="text-sm text-surface-200">Edit aggregated lines before importing. Prices are gross (pre-discount).</p> <div class="flex items-center justify-between gap-3 flex-wrap rounded-xl border border-white/10 bg-white/5 px-3 py-2"><div class="text-sm text-white/80">Receipt Currency</div> <select class="input bg-white/5 border border-white/15 rounded-lg px-3 py-2 text-white text-sm"></select> <!></div> <!> <!> <div class="border border-surface-800 rounded-xl p-4 space-y-3"><div class="flex items-center justify-between gap-3"><div><p class="text-sm font-semibold">This receipt tax</p> <p class="text-xs text-surface-300"> </p></div> <div class="flex items-center gap-2"><span class="text-sm text-surface-300">$</span> <input class="input w-28 text-right" inputmode="decimal" placeholder="0.00"/></div></div> <!></div> <button class="btn btn-primary w-full">Import items & tax</button> <button class="btn btn-outline w-full">Cancel</button></div></div>'),oi=L('<label class="block"><span class="text-sm text-surface-200">Quantity</span> <input class="input w-full" placeholder="1" inputmode="numeric"/></label>'),li=L('<label class="block"><span class="text-sm text-surface-200"> </span> <input class="input w-full" placeholder="19.98" inputmode="decimal"/></label>'),ci=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold"> </h3> <label class="block"><span class="text-sm text-surface-200">Item Name</span> <input class="input w-full" placeholder="Cheeseburger"/></label> <!> <div class="grid grid-cols-2 gap-3"><label class="block"><span class="text-sm text-surface-200"> </span> <input class="input w-full" placeholder="9.99" inputmode="decimal"/></label> <!></div> <div class="grid grid-cols-2 gap-3"><label class="block"><span class="text-sm text-surface-200"> </span> <input class="input w-full" placeholder="2.00" inputmode="decimal"/></label> <label class="block"><span class="text-sm text-surface-200">Discount (%)</span> <input class="input w-full" placeholder="10" inputmode="decimal"/></label></div> <div class="rounded-lg bg-surface-800/70 border border-surface-700 px-3 py-2 text-sm flex items-center justify-between"><div class="flex flex-col gap-1 w-full"><div class="flex items-center justify-between"><span class="text-surface-300">Discounted unit</span> <span class="font-semibold text-white"> </span></div> <div class="flex items-center justify-between"><span class="text-surface-300">Total after discount</span> <span class="font-semibold text-white"> </span></div></div></div> <div class="flex gap-3"><button class="btn btn-outline w-full">Cancel</button> <button class="btn btn-primary w-full"> </button></div></div></div>'),di=L('<button class="action-btn action-btn-surface action-btn-compact" type="button"> </button>'),ui=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold">Tax / Tip</h3> <p class="text-xs text-surface-300"> </p> <label class="block space-y-1"><span class="text-sm text-surface-200">Tax ($)</span> <input class="input w-full" inputmode="decimal"/> <p class="text-xs text-surface-400"> </p></label> <label class="block space-y-1"><span class="text-sm text-surface-200">Tip ($)</span> <input class="input w-full" inputmode="decimal"/> <p class="text-xs text-surface-400"> </p></label> <div class="flex flex-wrap gap-2"></div> <div class="flex gap-3"><button class="btn btn-outline w-full">Cancel</button> <button class="btn btn-primary w-full">Save</button></div></div></div>'),vi=L("<option> </option>"),pi=L('<div class="text-sm text-primary-200 space-y-1 border border-primary-500/40 rounded-xl p-3 bg-primary-500/10"><div class="flex justify-between items-center"><span class="font-semibold"> </span> <span class="text-xs opacity-80"> </span></div> <p> </p> <p> </p> <p> </p> <p> </p> <p> </p> <p class="font-semibold text-white"> </p></div>'),fi=L('<div class="flex justify-between"><span> </span> <span> </span></div>'),mi=L('<div class="flex justify-between text-primary-200 font-semibold"><span> </span> <span> </span></div>'),_i=L('<div class="border border-surface-800 rounded-xl p-3 space-y-2"><div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full"></span> <p class="font-semibold"> </p></div> <div class="space-y-1 text-sm text-surface-200"><!> <div class="flex justify-between font-semibold text-white"><span>Items subtotal</span> <span> </span></div> <div class="flex justify-between"><span>Tax share</span> <span> </span></div> <div class="flex justify-between"><span>Tip share</span> <span> </span></div> <div class="flex justify-between font-semibold text-white"><span>Total</span> <span> </span></div> <!></div></div>'),bi=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white max-h-[80vh] overflow-y-auto"><div class="flex items-center justify-between gap-3 flex-wrap"><h3 class="text-lg font-semibold">Summary</h3> <div class="flex items-center gap-2"><span class="text-sm text-white/70">Summary in:</span> <select class="input bg-white/5 border border-white/15 rounded-lg px-3 py-2 text-white text-sm"></select></div></div> <div class="text-sm text-surface-200 space-y-1"><p> </p> <p> </p> <p> </p> <p> </p> <p> </p> <p class="font-semibold text-white"> </p></div> <!> <div class="space-y-3"></div> <button class="btn btn-primary w-full">Close</button></div></div>'),xi=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold">Change name</h3> <input class="input w-full" placeholder="Your name"/> <div class="flex gap-3"><button class="btn btn-outline w-full">Cancel</button> <button class="btn btn-primary w-full">Save</button></div></div></div>'),gi=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold">Rename restaurant</h3> <input class="input w-full" placeholder="Restaurant name"/> <div class="flex gap-3"><button class="btn btn-outline w-full">Cancel</button> <button class="btn btn-primary w-full">Save</button></div></div></div>'),hi=L('<div class="fixed inset-0 bg-black/40 flex items-end justify-center"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold">Add person</h3> <input class="input w-full" placeholder="Name"/> <div class="flex gap-3"><button class="btn btn-outline w-full">Cancel</button> <button class="btn btn-primary w-full">Add</button></div></div></div>'),yi=L('<div class="text-error-300 text-sm"> </div>'),wi=L('<div class="fixed inset-0 bg-black/60 flex items-end justify-center z-50"><div class="glass-card w-full rounded-t-3xl p-6 space-y-4 text-white"><h3 class="text-lg font-semibold text-center">Join this room</h3> <p class="text-center text-surface-200 text-sm"> </p> <input class="input w-full" placeholder="Your name"/> <!> <div class="flex gap-3"><button class="btn btn-outline w-full">Cancel</button> <button class="btn btn-primary w-full">Join</button></div></div></div>'),ki=L('<div class="min-h-screen bg-surface-900 text-surface-50 pb-24 relative"><!> <header class="px-6 pt-6 pb-4 space-y-3"><div class="accent-gradient rounded-3xl p-5 shadow-2xl flex flex-col md:flex-row md:items-center md:justify-center gap-4"><div class="text-center flex-1 order-1"><p class="text-sm text-white/70">Restaurant</p> <h1 class="text-2xl font-semibold text-white"> </h1> <div class="flex items-center justify-center gap-3 mt-2 text-sm text-white/80 flex-wrap"><span class="rounded-full bg-black/20 px-3 py-1 font-mono"> </span> <!></div></div> <div class="flex flex-col items-center justify-center order-2 md:order-3 md:w-48"><!> <div class="text-sm text-white mt-2"> </div> <div class="flex items-center justify-center gap-2 mt-3 w-full"><button class="action-btn action-btn-surface action-btn-compact text-xs sm:text-sm flex-1"><svg class="inline-block align-middle" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#eab308"><path d="M12 20h9"></path><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5Z"></path></svg> <span class="inline ml-1">Change name</span></button></div> <div class="flex items-center justify-center gap-2 mt-2 w-full"><button class="action-btn action-btn-surface action-btn-compact text-xs sm:text-sm flex-1"><svg class="inline-block align-middle" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12l-8-8H6a2 2 0 0 0-2 2v6l8 8a2 2 0 0 0 2.8 0l5.2-5.2A2 2 0 0 0 20 12Z"></path><path d="M7.5 7.5h.01"></path></svg> <span class="inline-block ml-1 whitespace-normal leading-tight text-left"><span class="block">Rename</span> <span class="block">restaurant</span></span></button> <button class="action-btn action-btn-primary action-btn-compact text-xs sm:text-sm flex-1"><svg class="inline-block align-middle" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.75" stroke-linecap="round" stroke-linejoin="round" style="color:#22c55e"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> <span class="inline-block ml-1 whitespace-normal leading-tight text-left"><span class="block">Add</span> <span class="block">person</span></span></button></div></div></div> <div class="flex flex-col md:flex-row gap-3 items-center justify-center mt-2"><div class="flex items-center gap-2"><span class="text-sm text-white/70">Bill currency:</span> <select class="input bg-white/5 border border-white/15 rounded-lg px-3 py-2 text-white text-sm"></select></div></div> <div class="flex gap-3 overflow-x-auto pt-2 justify-center"><!></div></header> <main class="px-6 space-y-4"><!> <!> <section class="space-y-3"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold">Items</h2> <!></div> <!></section></main> <div class="fixed bottom-0 inset-x-0 bg-surface-900/90 border-t border-surface-800 px-6 py-3 flex gap-2 backdrop-blur"><button class="btn btn-primary flex-1">Add Item</button> <button class="btn btn-outline flex-1">Tax/Tip</button> <button class="btn btn-outline flex-1">Summary</button></div> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>');function qi(v,k){mr(k,!1);let q=Lt(k,"data",8)().roomCode,P=null,f=$(null),_=$({userId:"",name:"",initials:"",colorSeed:""}),X=$(!1),A=$(null),le=$(null),J=$(!1),Se=$(!1),te=$([]),me=$(null),$e=$(!1),Re=$(!1),S=$(0),Y=$(0),xe=$(""),I=$(kt),he=$(0),ve=$(0),Ue=$(0),we=$(0),Xe=$(0),Qe=$(!1),_e=$("new"),He=null,U=$({name:"",quantity:"1",unitPrice:"",linePrice:"",discountCents:"",discountPercent:""}),Ct=$(!1),ot=$(""),nt=$(""),jt=$(!1),O=$(null),Pt=$(!1),De=$(!1),lt=$(""),qt=$(""),en=$(!1),tn=$(""),mn=$(!1),mt=$(""),Ot=$(null),Ze=$(0),_n=$(0),nn=$(0),bn=$(0),an=$(0),_t=$("connecting"),D=$(kt),H=$(kt),St=$(null),Nt=null,At=null,Q=$([]),ct=$([]),Mt=$([]),xn=$({}),ze=$({}),sn=$({}),Zn="",gn=$(""),bt=$(null);const rn=500,za=5e3,Wa=5e3,Va=1e4;let Rt=$(rn),$t=null,on=null,dt=null,Ht=0,zt=!1,hn=!1,Ut=0;const yn=[],Kn=()=>{try{P==null||P.close()}catch{}},ut=t=>{P&&P.readyState===WebSocket.OPEN?P.send(JSON.stringify({type:"op",op:t})):(yn.push(t),(!P||P.readyState===WebSocket.CLOSED||P.readyState===WebSocket.CLOSING)&&Vt())},wn=yr(),Ya=hr(),Ga=async t=>{if(t.type!=="image/heic"&&t.type!=="image/heif")return t;const n=URL.createObjectURL(t);try{const a=new Image;await new Promise((m,g)=>{a.onload=()=>m(),a.onerror=()=>g(new Error("Failed to load image")),a.src=n});const o=document.createElement("canvas");o.width=a.naturalWidth||a.width,o.height=a.naturalHeight||a.height;const i=o.getContext("2d");if(!i)return t;i.drawImage(a,0,0);const p=await new Promise(m=>o.toBlob(m,"image/jpeg",.9));if(!p)return t;const d=t.name.replace(/\.\w+$/,"")||"receipt";return new File([p],`${d}.jpg`,{type:"image/jpeg"})}finally{URL.revokeObjectURL(n)}},Qa=t=>typeof t=="string"?JSON.parse(t):t,Wt=t=>t?t.startsWith("#")?t:`#${t}`:"#94a3b8",kn=t=>{let n=2166136261;for(let a=0;a<t.length;a++)n^=t.charCodeAt(a),n=Math.imul(n,16777619);return(n>>>0).toString(16).padStart(6,"0").slice(0,6)},Ie=t=>Fr[t]??2,xt=t=>Math.pow(10,Ie(t)),Be=t=>Er[t]??"",pe=(t,n=e(D))=>Ae(t,n,Be(n),Ie(n)),ea=t=>{if(!t)return;const n=t.toUpperCase();c(D,n),c(f,e(f)?{...e(f),currency:n}:e(f));const a={currency:n};ut({kind:"set_room_name",payload:a}),Ke({kind:"set_room_name",payload:a})},Xa=t=>{if(!t)return;const n=t.toUpperCase();c(H,n),c(f,e(f)?{...e(f),target_currency:n}:e(f));const a={target_currency:n};ut({kind:"set_room_name",payload:a}),Ke({kind:"set_room_name",payload:a}),Nt=null,At=null},Za=async()=>{if(e(H)===e(D))return Nt=1,At=null,1;if(Nt)return Nt;const t=await fetch(`${wn}/fx?base=${e(D)}&target=${e(H)}`);if(!t.ok)throw new Error("Rate unavailable");const n=await t.json();if(Nt=Number(n.rate),n.as_of){const a=typeof n.as_of=="number"?n.as_of*1e3:Number.isFinite(Date.parse(n.as_of))?Date.parse(n.as_of):NaN;At=Number.isFinite(a)?new Date(a).toISOString():null}else At=null;return Nt},vt=(t,n=e(D))=>{const a=Number.parseFloat(t||"");return Number.isFinite(a)?Math.max(0,Math.round(a*xt(n))):0},ta=(t,n=e(D))=>{const a=Ie(n),o=Math.pow(10,a),i=Number.parseFloat(t||"");return Number.isFinite(i)?Math.max(0,Math.round(i*o)):0},Cn=t=>t!=null&&t.length?t.reduce((n,a)=>{const o=Math.max(1,Number.parseInt(a.quantity||"1",10)||1),i=vt(a.unitPrice,e(I)||e(D)),d=vt(a.linePrice,e(I)||e(D))||i*o,m=Number.parseFloat(a.discountPercent||"0")||0,g=vt(a.discountCents,e(I)||e(D))||(i?Math.round(i*(m/100)):0),x=Math.max(0,d-g*o);return n+x},0):0,Pn=t=>{const n=Math.max(1,Number.parseInt(t.quantity||"1",10)||1),a=vt(t.unitPrice,e(I)||e(D)),i=vt(t.linePrice,e(I)||e(D))||a*n,p=Number.parseFloat(t.discountPercent||"0")||0,d=vt(t.discountCents,e(I)||e(D))||(a?Math.round(a*(p/100)):0),m=Math.max(0,i-d*n);return{netUnit:Math.max(0,a-d),netTotal:m}},na=()=>{const t=Math.max(1,Number.parseInt(e(U).quantity||"1",10)||1),n=vt(e(U).unitPrice,e(D)),o=vt(e(U).linePrice,e(D))||n*t,i=Number.parseFloat(e(U).discountPercent||"0")||0,p=vt(e(U).discountCents,e(D))||(n?Math.round(n*(i/100)):0),d=Math.max(0,o-p*t);return{netUnit:t>0?Math.max(0,Math.round(d/t)):0,netTotal:d}},Ka=t=>{if(!e(le))return;const n=[...e(Q)],a=n[t];if(!a)return;const o=e(ve)||Cn(n);n.splice(t,1),c(Q,n);const i=Pn(a).netTotal,p=Cn(n);if(o>0&&e(xe)!==null&&e(xe)!==void 0){const d=e(he),m=Math.round(i/o*d),g=Math.max(0,d-m),x=Ie(e(I)||e(D)),y=xt(e(I)||e(D));c(xe,(g/y).toFixed(x))}c(ve,p)},aa=(t,n)=>kn(t||n||"seed"),sa=t=>{const n=t.id||t.ID||"",a=t.name||t.Name||"",o=t.colorSeed||t.ColorSeed||t.color_seed||t.Color_seed||aa(n,a);return{id:n,name:a,initials:t.initials||t.Initials||rt(a),colorSeed:o,present:t.present??t.Present??!1}},Ke=t=>{if(!e(f))return;const n=Qa(t.payload),a={...e(f),items:{...e(f).items},participants:{...e(f).participants}};switch(t.kind){case"set_item":{const o=n.item;o.assigned||(o.assigned={}),a.items[o.id]=o;break}case"remove_item":{const o=n.id||n.item_id;o&&a.items[o]&&delete a.items[o];break}case"assign_item":{const{item_id:o,user_id:i,on:p}=n,d=a.items[o];d&&(d.assigned=d.assigned||{},d.assigned[i]=p);break}case"set_tax_tip":{typeof n.tax_cents=="number"&&(a.tax_cents=n.tax_cents),typeof n.tip_cents=="number"&&(a.tip_cents=n.tip_cents);break}case"remove_participant":{const o=n.id||n.participant_id;o&&a.participants[o]&&delete a.participants[o];break}case"set_participant":{const o=sa(n.participant);o!=null&&o.id&&(a.participants[o.id]=o,o.id===e(_).userId&&(c(_,{...e(_),name:o.name||e(_).name,initials:o.initials||rt(o.name||e(_).name),colorSeed:o.colorSeed||e(_).colorSeed}),localStorage.setItem(`room:${q}:identity`,JSON.stringify(e(_)))));break}case"set_room_name":{n!=null&&n.name&&(a.name=n.name),n!=null&&n.currency&&(c(D,String(n.currency).toUpperCase()),a.currency=e(D)),n!=null&&n.target_currency&&(c(H,String(n.target_currency).toUpperCase()),a.target_currency=e(H));break}}c(f,a)},Sn=()=>{!P||P.readyState!==WebSocket.OPEN||P.send(JSON.stringify({type:"resync",last_seq:0}))},Nn=()=>{e(bt)&&clearTimeout(e(bt)),c(bt,setTimeout(()=>{Vt(),c(Rt,Math.min(Math.round(e(Rt)*1.5),za))},e(Rt))),c(_t,"reconnecting")},Vt=()=>{if(zt)return;zt=!0;const t=++Ut;e(bt)&&(clearTimeout(e(bt)),c(bt,null)),$t&&(clearInterval($t),$t=null),on&&(clearInterval(on),on=null),Kn(),P=null,hn=!1,c(_t,"connecting"),P=new WebSocket(`${Ya}/${q}`),P.onopen=()=>{if(t===Ut){for(zt=!1,c(Rt,rn),c(_t,"connected"),dt&&(clearTimeout(dt),dt=null),Sn(),$t=setInterval(Sn,6e4),on=setInterval(()=>{P&&P.readyState===WebSocket.OPEN&&(P.send(JSON.stringify({type:"ping"})),dt&&clearTimeout(dt),dt=setTimeout(()=>{t===Ut&&Kn()},Va))},Wa);yn.length&&P&&P.readyState===WebSocket.OPEN;){const n=yn.shift();P.send(JSON.stringify({type:"op",op:n}))}Mn(!0)}},P.onmessage=n=>{var o;if(t!==Ut)return;const a=JSON.parse(n.data);if(a.type==="pong"){dt&&(clearTimeout(dt),dt=null);return}if(a.type==="snapshot"){if(typeof a.seq=="number"&&a.seq<Ht)return;Ht=typeof a.seq=="number"?a.seq:Ht,c(f,{...a.doc,participants:Object.fromEntries(Object.entries(a.doc.participants||{}).map(([p,d])=>[p,sa(d)]))}),c(D,(e(f).currency||kt).toUpperCase()),c(H,(e(f).target_currency||e(D)||kt).toUpperCase());const i=e(_).userId&&((o=e(f).participants)==null?void 0:o[e(_).userId]);i&&(c(_,{...e(_),name:i.name||e(_).name,initials:i.initials||rt(i.name||e(_).name),colorSeed:i.colorSeed||e(_).colorSeed}),localStorage.setItem(`room:${q}:identity`,JSON.stringify(e(_)))),e(_).userId&&e(_).name&&dn(e(_).userId,e(_).name,!0)}if(a.type==="op"){if(typeof a.seq=="number"&&a.seq<Ht)return;typeof a.seq=="number"&&(Ht=a.seq),Ke(a.op)}},P.onclose=()=>{t===Ut&&(zt=!1,Mn(!1),$t&&(clearInterval($t),$t=null),hn?c(_t,"disconnected"):(c(_t,"reconnecting"),Nn()))},P.onerror=()=>{t===Ut&&(zt=!1,hn||(c(_t,"reconnecting"),Nn()))},window.addEventListener("beforeunload",()=>Mn(!1))},ln=(t,n)=>{var i;if(!e(f))return;const o=((i=e(f).items[t].assigned)==null?void 0:i[n])??!1;ut({kind:"assign_item",actor_id:e(_).userId,payload:{item_id:t,user_id:n,on:!o}})},es=()=>{var de;if(!e(f))return null;const t=e(f).participants||{},n=Object.values(e(f).items||{}),a=n.reduce((N,M)=>N+M.line_price_cents,0),o=n.reduce((N,M)=>N+M.discount_cents*(M.quantity||1),0),i=a-o,p=e(f).tax_cents||0,d=e(f).tip_cents||0,m=new Map,g=(N,M)=>{const re=Object.entries(M).filter(([,V])=>V>0),R=re.reduce((V,[,oe])=>V+oe,0);if(N<=0||R<=0||!re.length)return{};const w={},b=[];let z=0;re.forEach(([V,oe])=>{const Te=N*oe/R,W=Math.floor(Te);w[V]=W,z+=W,b.push({id:V,frac:Te-W})});let ie=N-z;b.sort((V,oe)=>oe.frac-V.frac||V.id.localeCompare(oe.id));for(let V=0;V<ie;V++)w[b[V].id]+=1;return w};n.forEach(N=>{const M=Object.entries(N.assigned||{}).filter(([,w])=>w).map(([w])=>w);if(M.length===0)return;const re=Math.max(0,N.line_price_cents-N.discount_cents*(N.quantity||1)),R=re/M.length;M.forEach(w=>{const b=t[w],z=m.get(w)||{name:(b==null?void 0:b.name)||w,color:Wt(b==null?void 0:b.colorSeed),items:[],itemsTotal:0,itemsAcc:0};z.itemsAcc+=R,m.set(w,z)}),re-R*M.length,M.forEach(w=>{const b=m.get(w);b&&(b.items.push({name:N.name,share_cents:Math.round(R)}),m.set(w,b))})});const x={},y=[];m.forEach((N,M)=>{const re=N.itemsAcc,R=Math.floor(re);x[M]=R,y.push({id:M,frac:re-R})});let h=Object.values(x).reduce((N,M)=>N+M,0),j=i-h;y.sort((N,M)=>M.frac-N.frac||N.id.localeCompare(M.id));for(let N=0;N<j;N++){const M=(de=y[N%y.length])==null?void 0:de.id;M&&(x[M]+=1)}m.forEach((N,M)=>{N.itemsTotal=x[M]||0,m.set(M,N)}),Array.from(m.values()).reduce((N,M)=>N+M.itemsTotal,0);const T={};m.forEach((N,M)=>{T[M]=N.itemsTotal});const ne=g(p,T),ce=g(d,T),ue=Array.from(m.entries()).map(([N,M])=>{const re=ne[N]||0,R=ce[N]||0,w=M.itemsTotal+re+R;return{id:N,...M,taxShare:re,tipShare:R,total:w}}),se=i+p+d;return{gross:a,discount:o,net:i,tax:p,tip:d,total:se,perPerson:ue}},ra=async()=>{const t=es();if(!t){c(O,null);return}if(c(O,t),e(H)!==e(D))try{const n=await Za(),a=Ie(e(D)),o=Ie(e(H)),i=Math.pow(10,a),p=Math.pow(10,o),d=x=>{const y=Math.floor(x),h=x-y;return h>.5+1e-9?y+1:Math.abs(h-.5)<=1e-9?y%2===0?y:y+1:y},m=x=>{const y=x/i*n*p;return d(y)},g={gross:m(t.gross),discount:m(t.discount),net:m(t.net),tax:m(t.tax),tip:m(t.tip),total:m(t.total),perPerson:t.perPerson.map(x=>({id:x.id,total:m(x.total)})),rate:n,asOf:At,currency:e(H)};c(O,{...t,converted:g})}catch(n){console.error("fx error",n),Nt=null,At=null}},ts=async t=>{var a,o;const n=t.target;if((a=n.files)!=null&&a[0]){c(me,null),c($e,!0),c(S,((o=e(f))==null?void 0:o.tax_cents)||0),c(Y,e(ct).reduce((i,p)=>{const d=p.quantity||1,m=Number(p.line_price_cents||0),g=Number(p.discount_cents||0)*d,x=Math.max(0,m-g);return i+x},0)),c(Re,e(f)&&Object.keys(e(f).items||{}).length>0||e(Y)>0),c(xe,"");try{const i=await Ga(n.files[0]),p=new FormData;p.append("file",i);const d=await fetch(`${wn}/receipt/parse`,{method:"POST",body:p});if(!d.ok){let h=`Receipt upload failed (${d.status})`;try{const j=await d.json();j!=null&&j.error&&(h=j.error)}catch{}c(me,h);return}const m=await d.json();c(le,m),c(St,m!=null&&m.currency?m.currency.toUpperCase():null),c(I,(e(St)||e(D)||kt).toUpperCase());const g=xt(e(I)),x=Ie(e(I));c(xe,(m==null?void 0:m.tax_cents)!=null?(Number(m.tax_cents)/g).toFixed(x):""),c(te,Array.isArray(m.warnings)?m.warnings.filter(Boolean):[]),c(Se,e(te).length>0||typeof m.confidence=="number"&&m.confidence<.6);const y=new Map;m.items.forEach(h=>{const j=h.quantity&&h.quantity>0?h.quantity:1;let T=h.unit_price_cents!=null?h.unit_price_cents/g:0,ne=h.line_price_cents!=null?h.line_price_cents/g:0;!T&&ne&&j>0&&(T=ne/j),!ne&&T&&j>0&&(ne=T*j);const ce=h.discount_cents!=null?h.discount_cents/g:0,ue=h.discount_percent!=null?h.discount_percent:T?ce/T*100:0,se=`${(h.name||"Item").trim().toLowerCase()}|${T.toFixed(x)}|${ce.toFixed(x)}`,de=y.get(se);de?(de.qty+=j,de.line+=ne):y.set(se,{name:h.name??"",qty:j,unit:T,discount:ce,discountPct:ue,line:ne})}),c(Q,Array.from(y.values()).map(h=>({name:h.name,quantity:String(h.qty),unitPrice:h.unit?h.unit.toFixed(x):"",linePrice:h.line?h.line.toFixed(x):"",discountCents:h.discount?h.discount.toFixed(x):"",discountPercent:h.discountPct?h.discountPct.toFixed(2):""}))),c(J,!0)}catch(i){c(me,i instanceof Error?i.message:"Receipt upload failed")}finally{c($e,!1),n.value=""}}},Yt=(t,n)=>{c(Q,e(Q).map((a,o)=>{if(o!==t)return a;const i=Number.parseFloat(a.quantity||""),p=Number.isFinite(i)&&i>0,d=p?i:null,m=Ie(e(D));xt(e(D));let g=Number.parseFloat(a.unitPrice||""),x=Number.parseFloat(a.linePrice||""),y=Number.parseFloat(a.discountCents||""),h=Number.parseFloat(a.discountPercent||"");n==="quantity"&&d!==null?g?x=p?g*d:x:x&&p&&(g=x/d):n==="unitPrice"&&p&&g?x=g*d:n==="linePrice"&&p&&x?g=x/d:!x&&p&&g?x=g*d:!g&&p&&x&&(g=x/d),g&&(n==="discountPercent"&&h?y=g*(h/100):n==="discountCents"&&y?h=y/g*100:h&&!y?y=g*(h/100):y&&!h&&(h=y/g*100));const j=ne=>Number.isFinite(ne)&&ne!==0?ne.toFixed(m):"",T={...a};return d!==null&&(T.quantity=String(d)),n!=="unitPrice"&&(T.unitPrice=j(g)),n!=="linePrice"&&(T.linePrice=j(x)),n!=="discountCents"&&(T.discountCents=j(y)),n!=="discountPercent"&&(T.discountPercent=j(h)),T}))},ns=()=>{if(!e(le)||!P)return;const t=o=>ta(o,e(I)||e(D)),n=new Map;e(Q).forEach(o=>{const i=Math.max(1,Number.parseInt(o.quantity||"1",10)||1);let p=t(o.unitPrice),d=t(o.linePrice);!p&&d&&i>0&&(p=Math.round(d/i));let m=t(o.discountCents);const g=Number.parseFloat(o.discountPercent||"0")||0;!m&&g&&p&&(m=Math.round(p*(g/100)));const x=`${(o.name||"Item").trim().toLowerCase()}|${p}|${d}|${m}|${g}`,y=n.get(x);y?(y.qty+=i,y.line=(y.line||0)+(d||p*i)):n.set(x,{name:o.name||"Item",qty:i,unit:p,line:d||p*i,disc:m,discPct:g})}),Array.from(n.values()).forEach((o,i)=>{const p=Math.round((o.line||o.unit*o.qty)/o.qty)||o.unit;for(let d=0;d<o.qty;d++){const g={item:{id:`${Date.now()}-${i}-${d}-${Math.random().toString(36).slice(2,6)}`,name:o.name,quantity:1,unit_price_cents:o.unit,line_price_cents:p,discount_cents:o.disc,discount_percent:o.discPct,assigned:{}}};P==null||P.send(JSON.stringify({type:"op",op:{kind:"set_item",actor_id:e(_).userId,payload:g}})),Ke({kind:"set_item",payload:g})}}),c(J,!1);const a=e(he);if(P&&e(f)){e(I)&&e(I)!==e(D)&&ea(e(I));const o=e(f).tax_cents||0,p={tax_cents:e(Re)?o+a:a,tip_cents:e(f).tip_cents||0};P.send(JSON.stringify({type:"op",op:{kind:"set_tax_tip",actor_id:e(_).userId,payload:p}})),Ke({kind:"set_tax_tip",payload:p})}c(le,null),c(Q,[]),c(xe,""),c(te,[]),c(Se,!1),c(St,null),c(I,(e(D)||kt).toUpperCase())},cn=t=>{const n=t.replace(/[^\d.-]/g,"");if(!n)return 0;const a=Number(n);return Number.isFinite(a)?Math.round(a*100):0},Gt=t=>{const n=Number.parseFloat(e(U).quantity||""),a=Number.isFinite(n)&&n>0,o=a?n:null;let i=Number.parseFloat(e(U).unitPrice||""),p=Number.parseFloat(e(U).linePrice||"");const d=e(U).discountCents||"",m=e(U).discountPercent||"";let g=Number.parseFloat(d),x=Number.parseFloat(m);const y=t==="discountCents"&&(d.trim()===""||Number(d)===0),h=t==="discountPercent"&&(m.trim()===""||Number(m)===0);y?(g=0,x=0):h&&(x=0,(d.trim()===""||Number(d)===0)&&(g=0)),t==="quantity"&&o!==null?i?p=i*o:p&&(i=p/o):t==="unitPrice"&&a&&i?p=i*o:t==="linePrice"&&a&&p?i=p/o:!p&&a&&i?p=i*o:!i&&a&&p&&(i=p/o),i&&(t==="discountPercent"&&x?g=i*(x/100):t==="discountCents"&&g?x=i?g/i*100:x:x&&!g&&!h?g=i*(x/100):g&&!x&&!y&&(x=i?g/i*100:x));const j=ne=>Number.isFinite(ne)&&ne!==0?ne.toFixed(exp):"",T={...e(U)};o!==null&&(T.quantity=String(o)),t!=="unitPrice"&&(T.unitPrice=j(i)),t!=="linePrice"&&(T.linePrice=j(p)),t!=="discountCents"&&(T.discountCents=j(g)),t!=="discountPercent"&&(T.discountPercent=j(x)),c(U,T)},as=()=>{c(_e,"new"),He=null,c(U,{name:"",quantity:"1",unitPrice:"",linePrice:"",discountCents:"",discountPercent:""}),c(Qe,!0)},ia=t=>{c(_e,"edit"),He=t.id,c(U,{name:t.name,quantity:String(t.quantity||1),unitPrice:t.unit_price_cents?(t.unit_price_cents/100).toFixed(2):"",linePrice:t.line_price_cents?(t.line_price_cents/100).toFixed(2):"",discountCents:t.discount_cents?(t.discount_cents/100).toFixed(2):"",discountPercent:t.discount_percent?t.discount_percent.toFixed(2):""}),c(Qe,!0)},ss=()=>{if(!e(U).name.trim())return;const t=e(_e)==="new"?Math.max(1,Number.parseFloat(e(U).quantity||"1")||1):1,n=cn(e(U).unitPrice),a=(e(U).discountCents||"").trim(),o=(e(U).discountPercent||"").trim();let i=0,p=0;a!==""&&o!==""?(i=cn(a),p=Number.parseFloat(o)||0):a!==""?(i=cn(a),p=n?i/n*100:0):o!==""&&(p=Number.parseFloat(o)||0,i=n?Math.round(n*(p/100)):0);let d=cn(e(U).linePrice);!d&&n&&(d=n*t);const m=d||n*t,g=x=>{var j,T,ne;const y=e(_e)==="edit"&&He&&((ne=(T=(j=e(f))==null?void 0:j.items)==null?void 0:T[He])!=null&&ne.assigned)?{...e(f).items[He].assigned}:{},h={item:{id:x,name:e(U).name.trim(),quantity:1,unit_price_cents:n||m,line_price_cents:d?Math.round(d/t):n,discount_cents:i,discount_percent:p,assigned:y}};ut({kind:"set_item",actor_id:e(_).userId,payload:h}),Ke({kind:"set_item",payload:h})};if(e(_e)==="edit"&&He)g(He);else for(let x=0;x<t;x++)g(`${Date.now()}-${x}-${Math.random().toString(36).slice(2,6)}`);c(Qe,!1),Sn()},rs=t=>{ia(t),c(_e,"new"),He=null},dn=(t,n,a)=>{var x,y,h,j;if(!n.trim())return;const o=n.trim(),i=o.toLowerCase(),p=Object.entries(((x=e(f))==null?void 0:x.participants)||{}).find(([,T])=>T.name.trim().toLowerCase()===i),d=p?p[0]:t,m=((j=(h=(y=e(f))==null?void 0:y.participants)==null?void 0:h[d])==null?void 0:j.colorSeed)||kn(d)||aa(d,o),g={id:d,name:o,initials:rt(o),color_seed:m,colorSeed:m,present:a};ut({kind:"set_participant",actor_id:e(_).userId||d,payload:{participant:g}}),Ke({kind:"set_participant",payload:{participant:g}}),e(_).userId===d&&(c(_,{...e(_),name:g.name,initials:g.initials,colorSeed:g.colorSeed}),localStorage.setItem(`room:${q}:identity`,JSON.stringify(e(_))))},Mn=t=>{const n=localStorage.getItem(`room:${q}:identity`);if(!n)return;const a=JSON.parse(n);dn(a.userId,a.name,t)},is=t=>{e(sn)[t]||(ut({kind:"remove_participant",actor_id:e(_).userId,payload:{id:t}}),Ke({kind:"remove_participant",payload:{id:t}}))},os=t=>{ut({kind:"remove_item",actor_id:e(_).userId,payload:{id:t}}),Ke({kind:"remove_item",payload:{id:t}})},ls=t=>{const n=t.trim();if(!n)return;const a={name:n};ut({kind:"set_room_name",actor_id:e(_).userId,payload:a}),Ke({kind:"set_room_name",payload:a})},cs=async()=>{if(!e(mt).trim()){c(Ot,"Please enter a name to join.");return}c(Ot,null);try{const t=await fetch(`${wn}/join-room`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_code:q.toUpperCase(),name:e(mt).trim()})});if(!t.ok){c(Ot,`Join failed (${t.status})`);return}const n=await t.json();c(_,{userId:n.user_id,name:e(mt).trim(),initials:rt(e(mt)),colorSeed:kn(n.user_id)}),localStorage.setItem(`room:${n.room_code}:identity`,JSON.stringify(e(_))),c(mn,!1),Vt()}catch(t){c(Ot,t instanceof Error?t.message:"Join failed")}};zs(()=>{const t=localStorage.getItem(`room:${q}:identity`);t?(c(_,JSON.parse(t)),Vt()):c(mn,!0);{Zn=`${window.location.origin}/room/${q}`,c(gn,`https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=${encodeURIComponent(Zn)}`);const n=()=>{c(Rt,rn),Nn()};window.addEventListener("online",n),window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&n()})}});const oa=t=>Math.round((Number.parseFloat(t||"0")||0)*100),ds=t=>{if(!(t!=null&&t.length))return 0;const n=t.reduce((a,o)=>{const i=o.quantity||1,p=Number(o.line_price_cents||0),d=Number(o.discount_cents||0)*i,m=Math.max(0,p-d);return a+m},0);return Number.isFinite(n)?Math.max(0,Math.round(n)):0},us=t=>{const n=e(Ze)||0,a=Math.round(n*t/100);c(nt,(a/100).toFixed(2)),c(nn,a),c(an,n>0?a/n*100:0)};Oe(()=>e(f),()=>{c(ct,e(f)?Object.values(e(f).items):[])}),Oe(()=>e(ct),()=>{c(sn,(()=>{const t={};return e(ct).forEach(n=>{Object.entries(n.assigned||{}).forEach(([a,o])=>{o&&(t[a]=!0)})}),t})())}),Oe(()=>e(f),()=>{c(Mt,e(f)?Object.values(e(f).participants):[])}),Oe(()=>(e(Mt),rt),()=>{c(xn,e(Mt).reduce((t,n)=>{const a=n.initials||rt(n.name);return t[a]=(t[a]||0)+1,t},{}))}),Oe(()=>(e(Mt),e(xn)),()=>{c(ze,(()=>{const t={},n={};return e(Mt).forEach(a=>{const o=a.initials||rt(a.name);t[o]=(t[o]||0)+1,(e(xn)[o]||0)>1&&(n[a.id]=String(t[o]))}),n})())}),Oe(()=>e(Q),()=>{c(ve,Cn(e(Q)))}),Oe(()=>(e(xe),e(I),e(D)),()=>{c(he,ta(e(xe),e(I)||e(D)))}),Oe(()=>(e(S),e(he)),()=>{c(Ue,e(S)+e(he))}),Oe(()=>(e(ve),e(he)),()=>{c(we,e(ve)>0?e(he)/e(ve)*100:0)}),Oe(()=>(e(Y),e(ve),e(Ue)),()=>{c(Xe,e(Y)+e(ve)>0?e(Ue)/(e(Y)+e(ve))*100:0)}),Oe(()=>e(ct),()=>{c(Ze,ds(e(ct)))}),Oe(()=>(e(ot),e(f)),()=>{var t;c(_n,oa(e(ot)||((t=e(f))!=null&&t.tax_cents?(e(f).tax_cents/100).toFixed(2):"0")))}),Oe(()=>(e(nt),e(f)),()=>{var t;c(nn,oa(e(nt)||((t=e(f))!=null&&t.tip_cents?(e(f).tip_cents/100).toFixed(2):"0")))}),Oe(()=>(e(Ze),e(_n)),()=>{c(bn,e(Ze)>0?e(_n)/e(Ze)*100:0)}),Oe(()=>(e(Ze),e(nn)),()=>{c(an,e(Ze)>0?e(nn)/e(Ze)*100:0)}),_r(),wr();var $n=ki(),la=r($n);{var vs=t=>{var n=jr(),a=r(n),o=l(r(a),2),i=r(o,!0);s(o);var p=l(o,2);s(a),s(n),G(()=>C(i,e(_t)==="reconnecting"?"Reconnecting to room‚Ä¶":"Connecting‚Ä¶")),E("click",p,()=>{e(bt)&&clearTimeout(e(bt)),c(Rt,rn),Vt()}),F(t,n)};K(la,t=>{e(_t)!=="connected"&&t(vs)})}var In=l(la,2),Tn=r(In),Fn=r(Tn),En=l(r(Fn),2),ps=r(En,!0);s(En);var ca=l(En,2),jn=r(ca),fs=r(jn);s(jn);var ms=l(jn,2);{var _s=t=>{var n=qr();G(()=>je(n,"src",e(gn))),F(t,n)};K(ms,t=>{e(gn)&&t(_s)})}s(ca),s(Fn);var da=l(Fn,2),ua=r(da);{let t=tt(()=>(e(_),u(()=>Wt(e(_).colorSeed)))),n=tt(()=>(e(ze),e(_),u(()=>e(ze)[e(_).userId]?String(e(ze)[e(_).userId]):void 0)));pn(ua,{get initials(){return e(_),u(()=>e(_).initials)},get color(){return e(t)},size:60,get badge(){return e(n)},get title(){return e(_),u(()=>e(_).name)}})}var qn=l(ua,2),bs=r(qn,!0);s(qn);var On=l(qn,2),xs=r(On);s(On);var va=l(On,2),pa=r(va),gs=l(pa,2);s(va),s(da),s(Tn);var An=l(Tn,2),fa=r(An),un=l(r(fa),2);G(()=>{e(D),Vn(()=>{})}),Ge(un,5,()=>Jt,Ye,(t,n)=>{var a=Or(),o=r(a);s(a);var i={};G(()=>{C(o,`${e(n),u(()=>e(n).flag)??""} ${e(n),u(()=>e(n).code)??""} ${e(n),u(()=>e(n).symbol)??""}`),i!==(i=(e(n),u(()=>e(n).code)))&&(a.value=(a.__value=(e(n),u(()=>e(n).code)))??"")}),F(t,a)}),s(un),s(fa),s(An);var ma=l(An,2),hs=r(ma);{var ys=t=>{var n=Et(),a=ht(n);Ge(a,1,()=>e(Mt),Ye,(o,i)=>{var p=Rr(),d=r(p);{let y=tt(()=>(e(i),u(()=>Wt(e(i).colorSeed)))),h=tt(()=>(e(ze),e(i),u(()=>e(ze)[e(i).id]?String(e(ze)[e(i).id]):void 0)));pn(d,{get initials(){return e(i),u(()=>e(i).initials)},get color(){return e(y)},size:36,get badge(){return e(h)},get title(){return e(i),u(()=>e(i).name)}})}var m=l(d,2),g=l(m,2);{var x=y=>{var h=Ar();E("click",h,()=>is(e(i).id)),F(y,h)};K(g,y=>{e(i),e(sn),u(()=>!e(i).present&&!e(sn)[e(i).id])&&y(x)})}s(p),G(()=>{Ra(m,(e(i),u(()=>`background:${e(i).present?"#22c55e":"#6b7280"};`))),je(m,"title",(e(i),u(()=>e(i).present?"Present":"Not present")))}),F(o,p)}),F(t,n)};K(hs,t=>{e(f)&&t(ys)})}s(ma),s(In);var Rn=l(In,2),_a=r(Rn);{var ws=t=>{var n=Ur(),a=r(n),o=r(a);s(a);var i=l(a,2);s(n),G(()=>C(o,`Receipt parsed with ${e(te),u(()=>e(te).length)??""} note${e(te),u(()=>e(te).length===1?"":"s")??""}‚Äîreview recommended.`)),E("click",i,()=>c(J,!0)),F(t,n)};K(_a,t=>{e(Se)&&t(ws)})}var ba=l(_a,2);{var ks=t=>{var n=Dr(),a=r(n,!0);s(n),G(()=>C(a,e(me))),F(t,n)};K(ba,t=>{e(me)&&t(ks)})}var xa=l(ba,2),Un=r(xa),Cs=l(r(Un),2);{var Ps=t=>{var n=Br(),a=l(r(n),2),o=r(a,!0);s(a);var i=l(a,2);s(n),G(()=>{Aa(n,1,`action-btn action-btn-surface action-btn-compact ${e($e)?"opacity-60 pointer-events-none":""}`),C(o,(e($e),e(ct),u(()=>e($e)?"Uploading...":e(ct).length>0?"Add receipt":"Upload receipt")))}),E("change",i,ts),F(t,n)};K(Cs,t=>{e(f)&&t(Ps)})}s(Un);var Ss=l(Un,2);{var Ns=t=>{var n=Et(),a=ht(n);Ge(a,1,()=>e(ct),Ye,(o,i)=>{var p=zr(),d=r(p),m=r(d),g=r(m,!0);s(m);var x=l(m,2),y=r(x,!0);s(x);var h=l(x,2);{var j=W=>{var Z=Lr(),ye=r(Z);s(Z),G((Fe,Ne)=>C(ye,`Discount: ${Fe??""} ¬∑ Net: ${Ne??""}`),[()=>(e(i),u(()=>pe(e(i).discount_cents))),()=>(e(i),u(()=>pe(e(i).line_price_cents-e(i).discount_cents)))]),F(W,Z)};K(h,W=>{e(i),u(()=>e(i).discount_cents)&&W(j)})}var T=l(h,2),ne=l(r(T),2),ce=r(ne);{var ue=W=>{var Z=Et(),ye=ht(Z);Ge(ye,1,()=>(e(i),u(()=>Object.entries(e(i).assigned||{}))),Ye,(Fe,Ne)=>{var ae=xr(()=>gr(e(Ne),2));let ee=()=>e(ae)[0],ke=()=>e(ae)[1];var Me=Et(),Ee=ht(Me);{var We=Ve=>{{let et=tt(()=>(e(f),ee(),yt(rt),u(()=>{var ge,be,Le,qe;return((be=(ge=e(f).participants)==null?void 0:ge[ee()])==null?void 0:be.initials)||rt(((qe=(Le=e(f).participants)==null?void 0:Le[ee()])==null?void 0:qe.name)||ee())}))),at=tt(()=>(e(f),ee(),u(()=>{var ge,be;return Wt((be=(ge=e(f).participants)==null?void 0:ge[ee()])==null?void 0:be.colorSeed)}))),pt=tt(()=>(e(ze),ee(),u(()=>e(ze)[ee()]?String(e(ze)[ee()]):void 0))),gt=tt(()=>(e(f),ee(),u(()=>{var ge,be;return(be=(ge=e(f).participants)==null?void 0:ge[ee()])==null?void 0:be.name})));pn(Ve,{get initials(){return e(et)},get color(){return e(at)},get badge(){return e(pt)},get title(){return e(gt)},size:22})}};K(Ee,Ve=>{ke()&&Ve(We)})}F(Fe,Me)}),F(W,Z)};K(ce,W=>{e(f)&&W(ue)})}s(ne),s(T),s(d);var se=l(d,2),de=r(se),N=r(de),M=l(N,2),re=r(M);{var R=W=>{var Z=Jr();F(W,Z)},w=W=>{var Z=Hr();F(W,Z)};K(re,W=>{e(i),e(_),u(()=>{var Z;return(Z=e(i).assigned)==null?void 0:Z[e(_).userId]})?W(R):W(w,!1)})}var b=l(re,2),z=r(b,!0);s(b),s(M),s(de);var ie=l(de,2),V=r(ie),oe=l(V,2),Te=l(oe,2);s(ie),s(se),s(p),G(W=>{je(m,"title",(e(i),u(()=>e(i).name))),C(g,(e(i),u(()=>e(i).name))),C(y,W),Aa(M,1,(e(i),e(_),u(()=>{var Z;return`action-btn ${(Z=e(i).assigned)!=null&&Z[e(_).userId]?"action-btn-danger":"action-btn-primary"} action-btn-compact`}))),je(M,"title",(e(i),e(_),u(()=>{var Z;return(Z=e(i).assigned)!=null&&Z[e(_).userId]?"Unassign me":"Assign to me"}))),C(z,(e(i),e(_),u(()=>{var Z;return(Z=e(i).assigned)!=null&&Z[e(_).userId]?"Unassign":"Me"})))},[()=>(e(i),u(()=>pe(e(i).line_price_cents)))]),E("click",d,()=>ln(e(i).id,e(_).userId)),E("keydown",d,W=>{(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),ln(e(i).id,e(_).userId))}),E("click",N,Xt(()=>{c(X,!0),c(A,e(i).id)})),E("click",M,Xt(()=>ln(e(i).id,e(_).userId))),E("click",V,Xt(()=>ia(e(i)))),E("click",oe,Xt(()=>rs(e(i)))),E("click",Te,Xt(()=>os(e(i).id))),F(o,p)}),F(t,n)};K(Ss,t=>{e(f)&&t(Ns)})}s(xa),s(Rn);var Dn=l(Rn,2),ga=r(Dn),ha=l(ga,2),Ms=l(ha,2);s(Dn);var ya=l(Dn,2);{var $s=t=>{var n=Qr(),a=r(n),o=l(r(a),2);Ge(o,5,()=>e(Mt),Ye,(p,d)=>{var m=Gr(),g=r(m),x=r(g);{let ce=tt(()=>(e(d),u(()=>Wt(e(d).colorSeed)))),ue=tt(()=>(e(ze),e(d),u(()=>e(ze)[e(d).id]?String(e(ze)[e(d).id]):void 0)));pn(x,{get initials(){return e(d),u(()=>e(d).initials)},get color(){return e(ce)},size:32,get badge(){return e(ue)},get title(){return e(d),u(()=>e(d).name)}})}var y=l(x,2),h=r(y,!0);s(y),s(g);var j=l(g,2);{var T=ce=>{var ue=Et(),se=ht(ue);{var de=M=>{var re=Wr();F(M,re)},N=M=>{var re=Vr();F(M,re)};K(se,M=>{e(f),e(A),e(d),u(()=>{var re;return(re=e(f).items[e(A)].assigned)==null?void 0:re[e(d).id]})?M(de):M(N,!1)})}F(ce,ue)},ne=ce=>{var ue=Yr();F(ce,ue)};K(j,ce=>{e(f),e(A),u(()=>{var ue,se;return(se=(ue=e(f))==null?void 0:ue.items)==null?void 0:se[e(A)]})?ce(T):ce(ne,!1)})}s(m),G(()=>C(h,(e(d),u(()=>e(d).name)))),E("click",m,()=>ln(e(A),e(d).id)),F(p,m)}),s(o);var i=l(o,2);s(a),s(n),E("click",i,()=>c(X,!1)),F(t,n)};K(ya,t=>{e(X)&&e(A)&&e(f)&&t($s)})}var wa=l(ya,2);{var Is=t=>{var n=ii(),a=r(n),o=l(r(a),4),i=l(r(o),2);G(()=>{e(I),Vn(()=>{e(xe)})}),Ge(i,5,()=>Jt,Ye,(R,w)=>{var b=Xr(),z=r(b);s(b);var ie={};G(()=>{C(z,`${e(w),u(()=>e(w).flag)??""} ${e(w),u(()=>e(w).code)??""} ${e(w),u(()=>e(w).symbol)??""}`),ie!==(ie=(e(w),u(()=>e(w).code)))&&(b.value=(b.__value=(e(w),u(()=>e(w).code)))??"")}),F(R,b)}),s(i);var p=l(i,2);{var d=R=>{var w=Zr(),b=r(w);s(w),G(()=>C(b,`Use detected ${e(St)??""}`)),E("click",w,()=>c(I,e(St))),F(R,w)};K(p,R=>{e(St)&&e(St)!==e(I)&&R(d)})}s(o);var m=l(o,2);{var g=R=>{var w=ei(),b=l(r(w),2);Ge(b,5,()=>e(te),Ye,(z,ie)=>{var V=Kr(),oe=r(V,!0);s(V),G(()=>C(oe,e(ie))),F(z,V)}),s(b),s(w),F(R,w)};K(m,R=>{e(te),u(()=>e(te).length>0)&&R(g)})}var x=l(m,2);Ge(x,1,()=>e(Q),Ye,(R,w,b)=>{var z=ai(),ie=r(z),V=l(r(ie),2);Ce(V),s(ie);var oe=l(ie,2),Te=r(oe),W=l(r(Te),2);Ce(W),s(Te);var Z=l(Te,2),ye=r(Z),Fe=r(ye);s(ye);var Ne=l(ye,2);Ce(Ne),s(Z),s(oe);var ae=l(oe,2),ee=r(ae),ke=r(ee),Me=r(ke);s(ke);var Ee=l(ke,2);Ce(Ee),s(ee);var We=l(ee,2),Ve=r(We),et=r(Ve);s(Ve);var at=l(Ve,2);Ce(at),s(We),s(ae);var pt=l(ae,2),gt=r(pt),ge=l(r(gt),2);Ce(ge),s(gt),s(pt);var be=l(pt,2);{var Le=fe=>{var st=Et(),It=ht(st);{var Bt=Tt=>{var Ft=ni(),Us=r(Ft);{var Ds=Bn=>{var $a=ti(),Ln=ht($a),Ia=l(r(Ln),2),Bs=r(Ia,!0);s(Ia),s(Ln);var Ta=l(Ln,2),Fa=l(r(Ta),2),Ls=r(Fa,!0);s(Fa),s(Ta),G((Js,Hs)=>{C(Bs,Js),C(Ls,Hs)},[()=>(e(Q),e(I),u(()=>pe(Pn(e(Q)[b]).netUnit,e(I)))),()=>(e(Q),e(I),u(()=>pe(Pn(e(Q)[b]).netTotal,e(I))))]),F(Bn,$a)};K(Us,Bn=>{e(Q),u(()=>e(Q)[b])&&Bn(Ds)})}s(Ft),F(Tt,Ft)};K(It,Tt=>{Tt(Bt)})}F(fe,st)};K(be,fe=>{e(Q),u(()=>e(Q)[b])&&fe(Le)})}var qe=l(be,2),Dt=r(qe);s(qe),s(z),G((fe,st,It,Bt,Tt,Ft)=>{C(Fe,`Unit Price (${fe??""})`),je(Ne,"step",st),C(Me,`Total (${It??""})`),je(Ee,"step",Bt),C(et,`Discount (${Tt??""} per unit)`),je(at,"step",Ft)},[()=>(e(I),u(()=>Be(e(I))||e(I))),()=>(e(I),u(()=>1/xt(e(I)))),()=>(e(I),u(()=>Be(e(I))||e(I))),()=>(e(I),u(()=>1/xt(e(I)))),()=>(e(I),u(()=>Be(e(I))||e(I))),()=>(e(I),u(()=>1/xt(e(I))))]),Pe(V,()=>e(Q)[b].name,fe=>Je(Q,e(Q)[b].name=fe)),Pe(W,()=>e(Q)[b].quantity,fe=>Je(Q,e(Q)[b].quantity=fe)),E("input",W,()=>Yt(b,"quantity")),Pe(Ne,()=>e(Q)[b].unitPrice,fe=>Je(Q,e(Q)[b].unitPrice=fe)),E("input",Ne,()=>Yt(b,"unitPrice")),Pe(Ee,()=>e(Q)[b].linePrice,fe=>Je(Q,e(Q)[b].linePrice=fe)),E("input",Ee,()=>Yt(b,"linePrice")),Pe(at,()=>e(Q)[b].discountCents,fe=>Je(Q,e(Q)[b].discountCents=fe)),E("input",at,()=>Yt(b,"discountCents")),Pe(ge,()=>e(Q)[b].discountPercent,fe=>Je(Q,e(Q)[b].discountPercent=fe)),E("input",ge,()=>Yt(b,"discountPercent")),E("click",Dt,()=>Ka(b)),F(R,z)});var y=l(x,2),h=r(y),j=r(h),T=l(r(j),2),ne=r(T);s(T),s(j);var ce=l(j,2),ue=l(r(ce),2);Ce(ue),s(ce),s(h);var se=l(h,2);{var de=R=>{var w=si(),b=r(w),z=l(r(b),2),ie=r(z);s(z),s(b);var V=l(b,2),oe=r(V),Te=r(oe,!0);s(oe);var W=l(oe,2),Z=r(W);s(W),s(V),s(w),G((ye,Fe,Ne,ae,ee)=>{C(ie,`${ye??""} + ${Fe??""} = ${Ne??""}`),C(Te,ae),C(Z,`Total tax %:
                  ${ee??""}`)},[()=>(e(S),u(()=>pe(e(S)))),()=>(e(he),u(()=>pe(e(he)))),()=>(e(Ue),u(()=>pe(e(Ue)))),()=>(e(Ue),u(()=>pe(e(Ue)))),()=>(e(Y),e(ve),e(Xe),u(()=>e(Y)+e(ve)>0?`${e(Xe).toFixed(2)}%`:"--%"))]),F(R,w)},N=R=>{var w=ri(),b=r(w);s(w),G(z=>C(b,`Tax % of this receipt:
              ${z??""}`),[()=>(e(ve),e(we),u(()=>e(ve)>0?`${e(we).toFixed(2)}%`:"--%"))]),F(R,w)};K(se,R=>{e(Re)?R(de):R(N,!1)})}s(y);var M=l(y,2),re=l(M,2);s(a),s(n),G((R,w)=>C(ne,`Receipt subtotal: ${R??""} ¬∑ Tax %
                ${w??""}`),[()=>(e(ve),u(()=>pe(e(ve)))),()=>(e(ve),e(we),u(()=>e(ve)>0?` ${e(we).toFixed(2)}%`:" --%"))]),Yn(i,()=>e(I),R=>c(I,R)),E("change",i,R=>{const w=(R.target.value||"").toUpperCase();c(I,w||e(I));const b=Ie(e(I));c(xe,e(xe)?Number.parseFloat(e(xe)).toFixed(b):e(xe))}),Pe(ue,()=>e(xe),R=>c(xe,R)),E("click",M,ns),E("click",re,()=>{c(J,!1),c(te,[]),c(Se,!1),c(I,(e(D)||kt).toUpperCase())}),F(t,n)};K(wa,t=>{e(J)&&e(le)&&t(Is)})}var ka=l(wa,2);{var Ts=t=>{var n=ci(),a=r(n),o=r(a),i=r(o,!0);s(o);var p=l(o,2),d=l(r(p),2);Ce(d),s(p);var m=l(p,2);{var g=ae=>{var ee=oi(),ke=l(r(ee),2);Ce(ke),s(ee),Pe(ke,()=>e(U).quantity,Me=>Je(U,e(U).quantity=Me)),E("input",ke,()=>Gt("quantity")),F(ae,ee)};K(m,ae=>{e(_e)==="new"&&ae(g)})}var x=l(m,2),y=r(x),h=r(y),j=r(h);s(h);var T=l(h,2);Ce(T),s(y);var ne=l(y,2);{var ce=ae=>{var ee=li(),ke=r(ee),Me=r(ke);s(ke);var Ee=l(ke,2);Ce(Ee),s(ee),G(We=>C(Me,`Total (${We??""})`),[()=>(e(D),u(()=>Be(e(D))||e(D)))]),Pe(Ee,()=>e(U).linePrice,We=>Je(U,e(U).linePrice=We)),E("input",Ee,()=>Gt("linePrice")),F(ae,ee)};K(ne,ae=>{e(_e)==="new"&&ae(ce)})}s(x);var ue=l(x,2),se=r(ue),de=r(se),N=r(de);s(de);var M=l(de,2);Ce(M),s(se);var re=l(se,2),R=l(r(re),2);Ce(R),s(re),s(ue);var w=l(ue,2),b=r(w),z=r(b),ie=l(r(z),2),V=r(ie,!0);s(ie),s(z);var oe=l(z,2),Te=l(r(oe),2),W=r(Te,!0);s(Te),s(oe),s(b),s(w);var Z=l(w,2),ye=r(Z),Fe=l(ye,2),Ne=r(Fe,!0);s(Fe),s(Z),s(a),s(n),G((ae,ee,ke,Me,Ee)=>{C(i,e(_e)==="edit"?"Edit item":"Add item"),C(j,`Unit Price (${ae??""})`),C(N,`Discount (${ee??""})`),C(V,ke),C(W,Me),Fe.disabled=Ee,C(Ne,e(_e)==="edit"?"Save":"Add")},[()=>(e(D),u(()=>Be(e(D))||e(D))),()=>(e(D),u(()=>Be(e(D))||e(D))),()=>u(()=>pe(na().netUnit)),()=>u(()=>pe(na().netTotal)),()=>(e(U),u(()=>!e(U).name.trim()))]),Pe(d,()=>e(U).name,ae=>Je(U,e(U).name=ae)),Pe(T,()=>e(U).unitPrice,ae=>Je(U,e(U).unitPrice=ae)),E("input",T,()=>Gt("unitPrice")),Pe(M,()=>e(U).discountCents,ae=>Je(U,e(U).discountCents=ae)),E("input",M,()=>Gt("discountCents")),Pe(R,()=>e(U).discountPercent,ae=>Je(U,e(U).discountPercent=ae)),E("input",R,()=>Gt("discountPercent")),E("click",ye,()=>c(Qe,!1)),E("click",Fe,ss),F(t,n)};K(ka,t=>{e(Qe)&&t(Ts)})}var Ca=l(ka,2);{var Fs=t=>{var n=ui(),a=r(n),o=l(r(a),2),i=r(o);s(o);var p=l(o,2),d=l(r(p),2);Ce(d);var m=l(d,2),g=r(m);s(m),s(p);var x=l(p,2),y=l(r(x),2);Ce(y);var h=l(y,2),j=r(h);s(h),s(x);var T=l(x,2);Ge(T,4,()=>[15,18,20],Ye,(se,de)=>{var N=di(),M=r(N);s(N),G(()=>C(M,`${de??""}%`)),E("click",N,()=>us(de)),F(se,N)}),s(T);var ne=l(T,2),ce=r(ne),ue=l(ce,2);s(ne),s(a),s(n),G((se,de,N)=>{C(i,`Items subtotal: ${se??""}`),C(g,`‚âà ${de??""}% of items subtotal`),C(j,`‚âà ${N??""}% of items subtotal`)},[()=>(e(Ze),u(()=>e(Ze)?pe(e(Ze)):"$0.00")),()=>(e(bn),u(()=>(e(bn)||0).toFixed(2))),()=>(e(an),u(()=>(e(an)||0).toFixed(2)))]),Pe(d,()=>e(ot),se=>c(ot,se)),Pe(y,()=>e(nt),se=>c(nt,se)),E("click",ce,()=>c(Ct,!1)),E("click",ue,()=>{const se=Math.round((Number.parseFloat(e(ot)||"0")||0)*100),de=Math.round((Number.parseFloat(e(nt)||"0")||0)*100),N={tax_cents:se,tip_cents:de};ut({kind:"set_tax_tip",actor_id:e(_).userId,payload:N}),Ke({kind:"set_tax_tip",payload:N}),c(Ct,!1)}),F(t,n)};K(Ca,t=>{e(Ct)&&t(Fs)})}var Pa=l(Ca,2);{var Es=t=>{var n=bi(),a=r(n),o=r(a),i=l(r(o),2),p=l(r(i),2);G(()=>{e(H),Vn(()=>{})}),Ge(p,5,()=>Jt,Ye,(w,b)=>{var z=vi(),ie=r(z);s(z);var V={};G(()=>{C(ie,`${e(b),u(()=>e(b).flag)??""} ${e(b),u(()=>e(b).code)??""} ${e(b),u(()=>e(b).symbol)??""}`),V!==(V=(e(b),u(()=>e(b).code)))&&(z.value=(z.__value=(e(b),u(()=>e(b).code)))??"")}),F(w,z)}),s(p),s(i),s(o);var d=l(o,2),m=r(d),g=r(m);s(m);var x=l(m,2),y=r(x);s(x);var h=l(x,2),j=r(h);s(h);var T=l(h,2),ne=r(T);s(T);var ce=l(T,2),ue=r(ce);s(ce);var se=l(ce,2),de=r(se);s(se),s(d);var N=l(d,2);{var M=w=>{var b=pi(),z=r(b),ie=r(z),V=r(ie);s(ie);var oe=l(ie,2),Te=r(oe);s(oe),s(z);var W=l(z,2),Z=r(W);s(W);var ye=l(W,2),Fe=r(ye);s(ye);var Ne=l(ye,2),ae=r(Ne);s(Ne);var ee=l(Ne,2),ke=r(ee);s(ee);var Me=l(ee,2),Ee=r(Me);s(Me);var We=l(Me,2),Ve=r(We);s(We),s(b),G((et,at,pt,gt,ge,be,Le)=>{C(V,`Converted to ${e(O),u(()=>e(O).converted.currency)??""}`),C(Te,`rate ${et??""}${e(O),u(()=>e(O).converted.asOf?` ¬∑ as of ${e(O).converted.asOf}`:"")??""}`),C(Z,`Gross: ${at??""}`),C(Fe,`Discounts: -${pt??""}`),C(ae,`Net: ${gt??""}`),C(ke,`Tax: ${ge??""}`),C(Ee,`Tip: ${be??""}`),C(Ve,`Total: ${Le??""}`)},[()=>(e(O),u(()=>{var et;return(et=e(O).converted.rate)==null?void 0:et.toFixed(4)})),()=>(yt(Ae),e(O),e(H),u(()=>Ae(e(O).converted.gross,e(H),Be(e(H)),Ie(e(H))))),()=>(yt(Ae),e(O),e(H),u(()=>Ae(e(O).converted.discount,e(H),Be(e(H)),Ie(e(H))))),()=>(yt(Ae),e(O),e(H),u(()=>Ae(e(O).converted.net,e(H),Be(e(H)),Ie(e(H))))),()=>(yt(Ae),e(O),e(H),u(()=>Ae(e(O).converted.tax,e(H),Be(e(H)),Ie(e(H))))),()=>(yt(Ae),e(O),e(H),u(()=>Ae(e(O).converted.tip,e(H),Be(e(H)),Ie(e(H))))),()=>(yt(Ae),e(O),e(H),u(()=>Ae(e(O).converted.total,e(H),Be(e(H)),Ie(e(H)))))]),F(w,b)};K(N,w=>{e(O),u(()=>e(O).converted)&&w(M)})}var re=l(N,2);Ge(re,5,()=>(e(O),u(()=>e(O).perPerson)),Ye,(w,b)=>{var z=_i(),ie=r(z),V=r(ie),oe=l(V,2),Te=r(oe,!0);s(oe),s(ie);var W=l(ie,2),Z=r(W);Ge(Z,1,()=>(e(b),u(()=>e(b).items)),Ye,(ge,be)=>{var Le=fi(),qe=r(Le),Dt=r(qe,!0);s(qe);var fe=l(qe,2),st=r(fe,!0);s(fe),s(Le),G(It=>{C(Dt,(e(be),u(()=>e(be).name))),C(st,It)},[()=>(e(be),u(()=>pe(e(be).share_cents)))]),F(ge,Le)});var ye=l(Z,2),Fe=l(r(ye),2),Ne=r(Fe,!0);s(Fe),s(ye);var ae=l(ye,2),ee=l(r(ae),2),ke=r(ee,!0);s(ee),s(ae);var Me=l(ae,2),Ee=l(r(Me),2),We=r(Ee,!0);s(Ee),s(Me);var Ve=l(Me,2),et=l(r(Ve),2),at=r(et,!0);s(et),s(Ve);var pt=l(Ve,2);{var gt=ge=>{var be=Et(),Le=ht(be);Ge(Le,1,()=>(e(O),e(b),u(()=>e(O).converted.perPerson.filter(qe=>qe.id===e(b).id))),Ye,(qe,Dt)=>{var fe=mi(),st=r(fe),It=r(st);s(st);var Bt=l(st,2),Tt=r(Bt,!0);s(Bt),s(fe),G(Ft=>{C(It,`Total (${e(O),u(()=>e(O).converted.currency)??""})`),C(Tt,Ft)},[()=>(yt(Ae),e(Dt),e(H),u(()=>Ae(e(Dt).total,e(H),Be(e(H)),Ie(e(H)))))]),F(qe,fe)}),F(ge,be)};K(pt,ge=>{e(O),u(()=>e(O).converted)&&ge(gt)})}s(W),s(z),G((ge,be,Le,qe)=>{Ra(V,(e(b),u(()=>`background:${e(b).color};`))),C(Te,(e(b),u(()=>e(b).name))),C(Ne,ge),C(ke,be),C(We,Le),C(at,qe)},[()=>(e(b),u(()=>pe(e(b).itemsTotal))),()=>(e(b),u(()=>pe(e(b).taxShare))),()=>(e(b),u(()=>pe(e(b).tipShare))),()=>(e(b),u(()=>pe(e(b).total)))]),F(w,z)}),s(re);var R=l(re,2);s(a),s(n),G((w,b,z,ie,V,oe)=>{C(g,`Gross: ${w??""}`),C(y,`Discounts: -${b??""}`),C(j,`Net: ${z??""}`),C(ne,`Tax: ${ie??""}`),C(ue,`Tip: ${V??""}`),C(de,`Total: ${oe??""}`)},[()=>(e(O),u(()=>pe(e(O).gross))),()=>(e(O),u(()=>pe(e(O).discount))),()=>(e(O),u(()=>pe(e(O).net))),()=>(e(O),u(()=>pe(e(O).tax))),()=>(e(O),u(()=>pe(e(O).tip))),()=>(e(O),u(()=>pe(e(O).total)))]),Yn(p,()=>e(H),w=>c(H,w)),E("change",p,async w=>{Xa(w.target.value),await ra()}),E("click",R,()=>c(jt,!1)),F(t,n)};K(Pa,t=>{e(jt)&&e(O)&&t(Es)})}var Sa=l(Pa,2);{var js=t=>{var n=xi(),a=r(n),o=l(r(a),2);Ce(o);var i=l(o,2),p=r(i),d=l(p,2);s(i),s(a),s(n),Pe(o,()=>e(qt),m=>c(qt,m)),E("click",p,()=>c(Pt,!1)),E("click",d,()=>{dn(e(_).userId,e(qt),!0),Je(_,e(_).name=e(qt).trim()),Je(_,e(_).initials=e(qt).trim().slice(0,2).toUpperCase()),localStorage.setItem(`room:${q}:identity`,JSON.stringify(e(_))),c(Pt,!1)}),F(t,n)};K(Sa,t=>{e(Pt)&&t(js)})}var Na=l(Sa,2);{var qs=t=>{var n=gi(),a=r(n),o=l(r(a),2);Ce(o);var i=l(o,2),p=r(i),d=l(p,2);s(i),s(a),s(n),G(m=>d.disabled=m,[()=>(e(lt),u(()=>!e(lt).trim()))]),Pe(o,()=>e(lt),m=>c(lt,m)),E("click",p,()=>c(De,!1)),E("click",d,()=>{ls(e(lt)),c(De,!1)}),F(t,n)};K(Na,t=>{e(De)&&t(qs)})}var Ma=l(Na,2);{var Os=t=>{var n=hi(),a=r(n),o=l(r(a),2);Ce(o);var i=l(o,2),p=r(i),d=l(p,2);s(i),s(a),s(n),Pe(o,()=>e(tn),m=>c(tn,m)),E("click",p,()=>c(en,!1)),E("click",d,()=>{var y;const m=e(tn).trim();if(!m)return;const g=Object.entries(((y=e(f))==null?void 0:y.participants)||{}).find(([,h])=>h.name.trim().toLowerCase()===m.toLowerCase()),x=g?g[0]:`guest-${Date.now()}`;dn(x,m,!1),c(en,!1)}),F(t,n)};K(Ma,t=>{e(en)&&t(Os)})}var As=l(Ma,2);{var Rs=t=>{var n=wi(),a=r(n),o=l(r(a),2),i=r(o);s(o);var p=l(o,2);Ce(p);var d=l(p,2);{var m=h=>{var j=yi(),T=r(j,!0);s(j),G(()=>C(T,e(Ot))),F(h,j)};K(d,h=>{e(Ot)&&h(m)})}var g=l(d,2),x=r(g),y=l(x,2);s(g),s(a),s(n),G((h,j)=>{C(i,`Enter your name to join room ${h??""}.`),y.disabled=j},[()=>u(()=>q==null?void 0:q.toUpperCase()),()=>(e(mt),u(()=>!e(mt).trim()))]),Pe(p,()=>e(mt),h=>c(mt,h)),E("click",x,()=>history.back()),E("click",y,cs),F(t,n)};K(As,t=>{e(mn)&&t(Rs)})}s($n),G(t=>{C(ps,(e(f),u(()=>{var n;return((n=e(f))==null?void 0:n.name)||"Shared Bill"}))),C(fs,`Bill code: ${t??""}`),C(bs,(e(_),u(()=>e(_).name||"You")))},[()=>u(()=>q==null?void 0:q.toUpperCase())]),E("click",xs,()=>{c(qt,e(_).name),c(Pt,!0)}),E("click",pa,()=>{var t;c(lt,((t=e(f))==null?void 0:t.name)||""),c(De,!0)}),E("click",gs,()=>{c(tn,""),c(en,!0)}),Yn(un,()=>e(D),t=>c(D,t)),E("change",un,t=>ea(t.target.value)),E("click",ga,as),E("click",ha,()=>{var a,o;c(Ct,!0);const t=xt(e(D)),n=Ie(e(D));c(ot,(a=e(f))!=null&&a.tax_cents?(e(f).tax_cents/t).toFixed(n):""),c(nt,(o=e(f))!=null&&o.tip_cents?(e(f).tip_cents/t).toFixed(n):"")}),E("click",Ms,async()=>{await ra(),c(jt,!0)}),F(v,$n),br()}export{qi as component,ji as universal};
